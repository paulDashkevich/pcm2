# Домашняя работа по запуску кластера с общей файловой системой на трёх нодах

1. Цель домашней работы: 
> Реализация GFS2 хранилища на виртуалках под виртуалбокс
Цель: развернутьв advancedHosting следующую конфигурацию с помощью terraform
- виртуалка с iscsi
- 3 виртуальные машины с разделяемой файловой системой GFS2 поверх cLVM

> для сдачи
- terraform манифесты
- ansible роль
- README file 

2. Решение:
- Создаём конфигурацию терраформ и с помощью ансибл настраиваем кластер

3. Описание стенда

 - Запуск производится командами:
 
```
# terraform init 
# terraform apply --auto-approve
# ansible-playbook ./ansible/site.yml
```
И внесением токена провайдера в файле terraform.tfvars

По сценарию разворачивается машина с iscsi-таргетом и multipath, которая будет являться для кластера общим хранилищем, доступным по двум различным путям (подсеятм). В процессе настройки прописываются в листы доступа имена инициаторов-хостов. На хостах-инициаторах настраивается доступ к общему хранилищу по multipath, устанавливается и настраивается авторизация нод кластера, общие ресурсы, синхронизация времени, ssh ключи и общий внутренний плавающий ip-адрес.
Процесс разворачивания конфигураций описан ролями ансибл. 
Инвентори формируется автоматически на основе информации, полученной отработкой терраформа.
Проверить работоспособность стенда можно через web-gui

```
https://ip_ext:2224
```
После авторизации добавляем в web-gui адрес любой из нод server0 и вводим пароль для кластера
Логин и пароль задаются в конфигурационных файлах ансибл
